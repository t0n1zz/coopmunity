{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tony/Code/coopmunity/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tony/Code/coopmunity/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/tony/Code/coopmunity/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ChatBubbleOutlineOutlined,FavoriteBorderOutlined,FavoriteOutlined,ShareOutlined}from\"@mui/icons-material\";import{Box,Divider,IconButton,Typography,useTheme}from\"@mui/material\";import FlexBetween from\"components/FlexBetween\";import Friend from\"components/Friend\";import WidgetWrapper from\"components/WidgetWrapper\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{setPost}from\"state\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostWidget=function PostWidget(_ref){var postId=_ref.postId,postUserId=_ref.postUserId,name=_ref.name,description=_ref.description,location=_ref.location,picturePath=_ref.picturePath,userPicturePath=_ref.userPicturePath,likes=_ref.likes,comments=_ref.comments;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isComments=_useState2[0],setIsComments=_useState2[1];var dispatch=useDispatch();var token=useSelector(function(state){return state.token;});var loggedInUserId=useSelector(function(state){return state.user._id;});var isLiked=Boolean(likes[loggedInUserId]);var likeCount=Object.keys(likes).length;var _useTheme=useTheme(),palette=_useTheme.palette;var main=palette.neutral.main;var primary=palette.primary.main;var patchLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,updatedPost;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:3001/posts/\".concat(postId,\"/like\"),{method:\"PATCH\",headers:{Authorization:\"Bearer \".concat(token),\"Content-Type\":\"application/json\"},body:JSON.stringify({userId:loggedInUserId})});case 2:response=_context.sent;_context.next=5;return response.json();case 5:updatedPost=_context.sent;dispatch(setPost({post:updatedPost}));case 7:case\"end\":return _context.stop();}},_callee);}));return function patchLike(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(WidgetWrapper,{m:\"2rem 0\",children:[/*#__PURE__*/_jsx(Friend,{friendId:postUserId,name:name,subtitle:location,userPicturePath:userPicturePath}),/*#__PURE__*/_jsx(Typography,{color:main,sx:{mt:\"1rem\"},children:description}),picturePath&&/*#__PURE__*/_jsx(\"img\",{width:\"100%\",height:\"auto\",alt:\"post\",style:{borderRadius:\"0.75rem\",marginTop:\"0.75rem\"},src:\"http://localhost:3001/assets/\".concat(picturePath)}),/*#__PURE__*/_jsxs(FlexBetween,{mt:\"0.25rem\",children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"1rem\",children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.3rem\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:patchLike,children:isLiked?/*#__PURE__*/_jsx(FavoriteOutlined,{sx:{color:primary}}):/*#__PURE__*/_jsx(FavoriteBorderOutlined,{})}),/*#__PURE__*/_jsx(Typography,{children:likeCount})]}),/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.3rem\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setIsComments(!isComments);},children:/*#__PURE__*/_jsx(ChatBubbleOutlineOutlined,{})}),/*#__PURE__*/_jsx(Typography,{children:comments.length})]})]}),/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(ShareOutlined,{})})]}),isComments&&/*#__PURE__*/_jsxs(Box,{mt:\"0.5rem\",children:[comments.map(function(comment,i){return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Typography,{sx:{color:main,m:\"0.5rem 0\",pl:\"1rem\"},children:comment})]},\"\".concat(name,\"-\").concat(i));}),/*#__PURE__*/_jsx(Divider,{})]})]});};export default PostWidget;","map":{"version":3,"names":["ChatBubbleOutlineOutlined","FavoriteBorderOutlined","FavoriteOutlined","ShareOutlined","Box","Divider","IconButton","Typography","useTheme","FlexBetween","Friend","WidgetWrapper","useState","useDispatch","useSelector","setPost","jsx","_jsx","jsxs","_jsxs","PostWidget","_ref","postId","postUserId","name","description","location","picturePath","userPicturePath","likes","comments","_useState","_useState2","_slicedToArray","isComments","setIsComments","dispatch","token","state","loggedInUserId","user","_id","isLiked","Boolean","likeCount","Object","keys","length","_useTheme","palette","main","neutral","primary","patchLike","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","updatedPost","wrap","_callee$","_context","prev","next","fetch","concat","method","headers","Authorization","body","JSON","stringify","userId","sent","json","post","stop","apply","arguments","m","children","friendId","subtitle","color","sx","mt","width","height","alt","style","borderRadius","marginTop","src","gap","onClick","map","comment","i","pl"],"sources":["/Users/tony/Code/coopmunity/client/src/scenes/widgets/PostWidget.jsx"],"sourcesContent":["import {\n  ChatBubbleOutlineOutlined,\n  FavoriteBorderOutlined,\n  FavoriteOutlined,\n  ShareOutlined,\n} from \"@mui/icons-material\";\nimport { Box, Divider, IconButton, Typography, useTheme } from \"@mui/material\";\nimport FlexBetween from \"components/FlexBetween\";\nimport Friend from \"components/Friend\";\nimport WidgetWrapper from \"components/WidgetWrapper\";\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setPost } from \"state\";\n\nconst PostWidget = ({\n  postId,\n  postUserId,\n  name,\n  description,\n  location,\n  picturePath,\n  userPicturePath,\n  likes,\n  comments,\n}) => {\n  const [isComments, setIsComments] = useState(false);\n  const dispatch = useDispatch();\n  const token = useSelector((state) => state.token);\n  const loggedInUserId = useSelector((state) => state.user._id);\n  const isLiked = Boolean(likes[loggedInUserId]);\n  const likeCount = Object.keys(likes).length;\n\n  const { palette } = useTheme();\n  const main = palette.neutral.main;\n  const primary = palette.primary.main;\n\n  const patchLike = async () => {\n    const response = await fetch(`http://localhost:3001/posts/${postId}/like`, {\n      method: \"PATCH\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ userId: loggedInUserId }),\n    });\n    const updatedPost = await response.json();\n    dispatch(setPost({ post: updatedPost }));\n  };\n\n  return (\n    <WidgetWrapper m=\"2rem 0\">\n      <Friend\n        friendId={postUserId}\n        name={name}\n        subtitle={location}\n        userPicturePath={userPicturePath}\n      />\n      <Typography color={main} sx={{ mt: \"1rem\" }}>\n        {description}\n      </Typography>\n      {picturePath && (\n        <img\n          width=\"100%\"\n          height=\"auto\"\n          alt=\"post\"\n          style={{ borderRadius: \"0.75rem\", marginTop: \"0.75rem\" }}\n          src={`http://localhost:3001/assets/${picturePath}`}\n        />\n      )}\n      <FlexBetween mt=\"0.25rem\">\n        <FlexBetween gap=\"1rem\">\n          <FlexBetween gap=\"0.3rem\">\n            <IconButton onClick={patchLike}>\n              {isLiked ? (\n                <FavoriteOutlined sx={{ color: primary }} />\n              ) : (\n                <FavoriteBorderOutlined />\n              )}\n            </IconButton>\n            <Typography>{likeCount}</Typography>\n          </FlexBetween>\n\n          <FlexBetween gap=\"0.3rem\">\n            <IconButton onClick={() => setIsComments(!isComments)}>\n              <ChatBubbleOutlineOutlined />\n            </IconButton>\n            <Typography>{comments.length}</Typography>\n          </FlexBetween>\n        </FlexBetween>\n\n        <IconButton>\n          <ShareOutlined />\n        </IconButton>\n      </FlexBetween>\n      {isComments && (\n        <Box mt=\"0.5rem\">\n          {comments.map((comment, i) => (\n            <Box key={`${name}-${i}`}>\n              <Divider />\n              <Typography sx={{ color: main, m: \"0.5rem 0\", pl: \"1rem\" }}>\n                {comment}\n              </Typography>\n            </Box>\n          ))}\n          <Divider />\n        </Box>\n      )}\n    </WidgetWrapper>\n  );\n};\n\nexport default PostWidget;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}